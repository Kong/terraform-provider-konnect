---
# generated by https://github.com/hashicorp/terraform-plugin-docs
page_title: "konnect_event_gateway_produce_policy_schema_validation Resource - terraform-provider-konnect"
subcategory: ""
description: |-
  EventGatewayProducePolicySchemaValidation Resource
---

# konnect_event_gateway_produce_policy_schema_validation (Resource)

EventGatewayProducePolicySchemaValidation Resource

## Example Usage

```terraform
resource "konnect_event_gateway_produce_policy_schema_validation" "my_eventgatewayproducepolicyschemavalidation" {
  after     = "5c201a5b-4913-4356-a781-2cadb6632757"
  before    = "b3d20470-a7ed-49f3-a345-a2d5aafdc44d"
  condition = "context.topic.name.endsWith(\"my_suffix\") && records.headers[\"x-flag\"] == \"a-value\""
  config = {
    confluent_schema_registry = {
      key_validation_action = "reject"
      schema_registry = {
        schema_registry_reference_by_id = {
          id = "ed697e18-0f43-4f7c-b34c-11649822e02e"
        }
      }
      value_validation_action = "reject"
    }
    json = {
      key_validation_action = "mark"
      schema_registry = {
        schema_registry_reference_by_id = {
          id = "c903c782-d61b-46d2-84b3-f3f67b38c8ef"
        }
      }
      value_validation_action = "reject"
    }
  }
  description = "...my_description..."
  enabled     = true
  gateway_id  = "9524ec7d-36d9-465d-a8c5-83a3c9390458"
  labels = {
    key = "value"
  }
  name               = "...my_name..."
  virtual_cluster_id = "a3f4c612-4025-4392-861f-faa39b63e12d"
}
```

<!-- schema generated by tfplugindocs -->
## Schema

### Required

- `config` (Attributes) The configuration of the produce schema validation policy. (see [below for nested schema](#nestedatt--config))
- `gateway_id` (String) The UUID of your Gateway.
- `virtual_cluster_id` (String) The ID of the Virtual Cluster.

### Optional

- `after` (String) Determines the id of the existing policy the new policy should be inserted after. Either 'before' or 'after' can be provided, when both are omitted the new policy is added to the end of the chain. When both are provided, the request fails with a 400 Bad Request. Requires replacement if changed.
- `before` (String) Determines the id of the existing policy the new policy should be inserted before. Either 'before' or 'after' can be provided, when both are omitted the new policy is added to the end of the chain. When both are provided, the request fails with a 400 Bad Request. Requires replacement if changed.
- `condition` (String) A string containing the boolean expression that determines whether the policy is applied. Default: ""
- `description` (String) A human-readable description of the policy. Default: ""
- `enabled` (Boolean) Whether the policy is enabled. Default: true
- `labels` (Map of String) Labels store metadata of an entity that can be used for filtering an entity list or for searching across entity types. 

Keys must be of length 1-63 characters, and cannot start with "kong", "konnect", "mesh", "kic", or "_".
- `name` (String) A unique user-defined name of the policy.

### Read-Only

- `created_at` (String) An ISO-8601 timestamp representation of entity creation date.
- `id` (String) The unique identifier of the policy.
- `parent_policy_id` (String) The unique identifier of the parent policy, if any.
- `updated_at` (String) An ISO-8601 timestamp representation of entity update date.

<a id="nestedatt--config"></a>
### Nested Schema for `config`

Optional:

- `confluent_schema_registry` (Attributes) The configuration of the produce schema validation policy when using a schema registry. (see [below for nested schema](#nestedatt--config--confluent_schema_registry))
- `json` (Attributes) The configuration of the produce schema validation policy when using JSON parsing without schema. (see [below for nested schema](#nestedatt--config--json))

<a id="nestedatt--config--confluent_schema_registry"></a>
### Nested Schema for `config.confluent_schema_registry`

Optional:

- `key_validation_action` (String) Defines a behavior when record key is not valid.
* reject - rejects a batch for topic partition. Only available for produce.
* mark - marks a record with kong/server header and client ID value

  to help to identify the clients violating schema.
must be one of ["reject", "mark"]
- `schema_registry` (Attributes) A reference to a schema Registry. (see [below for nested schema](#nestedatt--config--confluent_schema_registry--schema_registry))
- `value_validation_action` (String) Defines a behavior when record value is not valid.
* reject - rejects a batch for topic partition. Only available for produce.
* mark - marks a record with kong/server header and client ID value

  to help to identify the clients violating schema.
must be one of ["reject", "mark"]

<a id="nestedatt--config--confluent_schema_registry--schema_registry"></a>
### Nested Schema for `config.confluent_schema_registry.schema_registry`

Optional:

- `schema_registry_reference_by_id` (Attributes) (see [below for nested schema](#nestedatt--config--confluent_schema_registry--schema_registry--schema_registry_reference_by_id))

<a id="nestedatt--config--confluent_schema_registry--schema_registry--schema_registry_reference_by_id"></a>
### Nested Schema for `config.confluent_schema_registry.schema_registry.schema_registry_reference_by_id`

Required:

- `id` (String) The unique identifier of the schema registry.




<a id="nestedatt--config--json"></a>
### Nested Schema for `config.json`

Optional:

- `key_validation_action` (String) Defines a behavior when record key is not valid.
* reject - rejects a batch for topic partition. Only available for produce.
* mark - marks a record with kong/server header and client ID value

  to help to identify the clients violating schema.
must be one of ["reject", "mark"]
- `schema_registry` (Attributes) A reference to a schema Registry. (see [below for nested schema](#nestedatt--config--json--schema_registry))
- `value_validation_action` (String) Defines a behavior when record value is not valid.
* reject - rejects a batch for topic partition. Only available for produce.
* mark - marks a record with kong/server header and client ID value

  to help to identify the clients violating schema.
must be one of ["reject", "mark"]

<a id="nestedatt--config--json--schema_registry"></a>
### Nested Schema for `config.json.schema_registry`

Optional:

- `schema_registry_reference_by_id` (Attributes) (see [below for nested schema](#nestedatt--config--json--schema_registry--schema_registry_reference_by_id))

<a id="nestedatt--config--json--schema_registry--schema_registry_reference_by_id"></a>
### Nested Schema for `config.json.schema_registry.schema_registry_reference_by_id`

Required:

- `id` (String) The unique identifier of the schema registry.

## Import

Import is supported using the following syntax:

In Terraform v1.5.0 and later, the [`import` block](https://developer.hashicorp.com/terraform/language/import) can be used with the `id` attribute, for example:

```terraform
import {
  to = konnect_event_gateway_produce_policy_schema_validation.my_konnect_event_gateway_produce_policy_schema_validation
  id = jsonencode({
    gateway_id = "9524ec7d-36d9-465d-a8c5-83a3c9390458"
    id = "9524ec7d-36d9-465d-a8c5-83a3c9390458"
    virtual_cluster_id = "..."
  })
}
```

The [`terraform import` command](https://developer.hashicorp.com/terraform/cli/commands/import) can be used, for example:

```shell
terraform import konnect_event_gateway_produce_policy_schema_validation.my_konnect_event_gateway_produce_policy_schema_validation '{"gateway_id": "9524ec7d-36d9-465d-a8c5-83a3c9390458", "id": "9524ec7d-36d9-465d-a8c5-83a3c9390458", "virtual_cluster_id": "..."}'
```
