---
# generated by https://github.com/hashicorp/terraform-plugin-docs
page_title: "konnect_mesh_http_route Resource - terraform-provider-konnect"
subcategory: ""
description: |-
  MeshHTTPRoute Resource
---

# konnect_mesh_http_route (Resource)

MeshHTTPRoute Resource

## Example Usage

```terraform
resource "konnect_mesh_http_route" "my_meshhttproute" {
  cp_id = "bf138ba2-c9b1-4229-b268-04d9d8a6410b"
  labels = {
    key = "value",
  }
  mesh = "...my_mesh..."
  name = "...my_name..."
  spec = {
    target_ref = {
      kind = "Dataplane"
      labels = {
        key = "value",
      }
      mesh      = "...my_mesh..."
      name      = "...my_name..."
      namespace = "...my_namespace..."
      proxy_types = [
        "Sidecar"
      ]
      section_name = "...my_section_name..."
      tags = {
        key = "value",
      }
    }
    to = [
      {
        hostnames = [
          "..."
        ]
        rules = [
          {
            default = {
              backend_refs = [
                {
                  kind = "Dataplane"
                  labels = {
                    key = "value",
                  }
                  mesh      = "...my_mesh..."
                  name      = "...my_name..."
                  namespace = "...my_namespace..."
                  port      = 10
                  proxy_types = [
                    "Gateway"
                  ]
                  section_name = "...my_section_name..."
                  tags = {
                    key = "value",
                  }
                  weight = 5
                }
              ]
              filters = [
                {
                  request_header_modifier = {
                    add = [
                      {
                        name  = "...my_name..."
                        value = "...my_value..."
                      }
                    ]
                    remove = [
                      "..."
                    ]
                    set = [
                      {
                        name  = "...my_name..."
                        value = "...my_value..."
                      }
                    ]
                  }
                  request_mirror = {
                    backend_ref = {
                      kind = "Mesh"
                      labels = {
                        key = "value",
                      }
                      mesh      = "...my_mesh..."
                      name      = "...my_name..."
                      namespace = "...my_namespace..."
                      port      = 4
                      proxy_types = [
                        "Sidecar"
                      ]
                      section_name = "...my_section_name..."
                      tags = {
                        key = "value",
                      }
                      weight = 2
                    }
                    percentage = {
                      integer = 0
                      str     = "...my_str..."
                    }
                  }
                  request_redirect = {
                    hostname = "...my_hostname..."
                    path = {
                      replace_full_path    = "...my_replace_full_path..."
                      replace_prefix_match = "...my_replace_prefix_match..."
                      type                 = "ReplaceFullPath"
                    }
                    port        = 46600
                    scheme      = "https"
                    status_code = 308
                  }
                  response_header_modifier = {
                    add = [
                      {
                        name  = "...my_name..."
                        value = "...my_value..."
                      }
                    ]
                    remove = [
                      "..."
                    ]
                    set = [
                      {
                        name  = "...my_name..."
                        value = "...my_value..."
                      }
                    ]
                  }
                  type = "URLRewrite"
                  url_rewrite = {
                    host_to_backend_hostname = false
                    hostname                 = "...my_hostname..."
                    path = {
                      replace_full_path    = "...my_replace_full_path..."
                      replace_prefix_match = "...my_replace_prefix_match..."
                      type                 = "ReplacePrefixMatch"
                    }
                  }
                }
              ]
            }
            matches = [
              {
                headers = [
                  {
                    name  = "...my_name..."
                    type  = "Absent"
                    value = "...my_value..."
                  }
                ]
                method = "PATCH"
                path = {
                  type  = "Exact"
                  value = "...my_value..."
                }
                query_params = [
                  {
                    name  = "...my_name..."
                    type  = "Exact"
                    value = "...my_value..."
                  }
                ]
              }
            ]
          }
        ]
        target_ref = {
          kind = "MeshServiceSubset"
          labels = {
            key = "value",
          }
          mesh      = "...my_mesh..."
          name      = "...my_name..."
          namespace = "...my_namespace..."
          proxy_types = [
            "Gateway"
          ]
          section_name = "...my_section_name..."
          tags = {
            key = "value",
          }
        }
      }
    ]
  }
  type = "MeshHTTPRoute"
}
```

<!-- schema generated by tfplugindocs -->
## Schema

### Required

- `cp_id` (String) Id of the Konnect resource
- `mesh` (String) name of the mesh
- `name` (String) name of the MeshHTTPRoute
- `spec` (Attributes) Spec is the specification of the Kuma MeshHTTPRoute resource. (see [below for nested schema](#nestedatt--spec))
- `type` (String) the type of the resource. must be "MeshHTTPRoute"

### Optional

- `labels` (Map of String) The labels to help identity resources

### Read-Only

- `creation_time` (String) Time at which the resource was created
- `modification_time` (String) Time at which the resource was updated
- `warnings` (List of String) warnings is a list of warning messages to return to the requesting Kuma API clients.
Warning messages describe a problem the client making the API request should correct or be aware of.

<a id="nestedatt--spec"></a>
### Nested Schema for `spec`

Optional:

- `target_ref` (Attributes) TargetRef is a reference to the resource the policy takes an effect on.
The resource could be either a real store object or virtual resource
defined inplace. (see [below for nested schema](#nestedatt--spec--target_ref))
- `to` (Attributes List) To matches destination services of requests and holds configuration. (see [below for nested schema](#nestedatt--spec--to))

<a id="nestedatt--spec--target_ref"></a>
### Nested Schema for `spec.target_ref`

Optional:

- `kind` (String) Kind of the referenced resource. must be one of ["Mesh", "MeshSubset", "MeshGateway", "MeshService", "MeshExternalService", "MeshMultiZoneService", "MeshServiceSubset", "MeshHTTPRoute", "Dataplane"]
- `labels` (Map of String) Labels are used to select group of MeshServices that match labels. Either Labels or
Name and Namespace can be used.
- `mesh` (String) Mesh is reserved for future use to identify cross mesh resources.
- `name` (String) Name of the referenced resource. Can only be used with kinds: `MeshService`,
`MeshServiceSubset` and `MeshGatewayRoute`
- `namespace` (String) Namespace specifies the namespace of target resource. If empty only resources in policy namespace
will be targeted.
- `proxy_types` (List of String) ProxyTypes specifies the data plane types that are subject to the policy. When not specified,
all data plane types are targeted by the policy.
- `section_name` (String) SectionName is used to target specific section of resource.
For example, you can target port from MeshService.ports[] by its name. Only traffic to this port will be affected.
- `tags` (Map of String) Tags used to select a subset of proxies by tags. Can only be used with kinds
`MeshSubset` and `MeshServiceSubset`


<a id="nestedatt--spec--to"></a>
### Nested Schema for `spec.to`

Optional:

- `hostnames` (List of String) Hostnames is only valid when targeting MeshGateway and limits the
effects of the rules to requests to this hostname.
Given hostnames must intersect with the hostname of the listeners the
route attaches to.
- `rules` (Attributes List) Rules contains the routing rules applies to a combination of top-level
targetRef and the targetRef in this entry.
Not Null (see [below for nested schema](#nestedatt--spec--to--rules))
- `target_ref` (Attributes) TargetRef is a reference to the resource that represents a group of
request destinations.
Not Null (see [below for nested schema](#nestedatt--spec--to--target_ref))

<a id="nestedatt--spec--to--rules"></a>
### Nested Schema for `spec.to.rules`

Optional:

- `default` (Attributes) Default holds routing rules that can be merged with rules from other
policies.
Not Null (see [below for nested schema](#nestedatt--spec--to--rules--default))
- `matches` (Attributes List) Matches describes how to match HTTP requests this rule should be applied
to.
Not Null (see [below for nested schema](#nestedatt--spec--to--rules--matches))

<a id="nestedatt--spec--to--rules--default"></a>
### Nested Schema for `spec.to.rules.default`

Optional:

- `backend_refs` (Attributes List) (see [below for nested schema](#nestedatt--spec--to--rules--default--backend_refs))
- `filters` (Attributes List) (see [below for nested schema](#nestedatt--spec--to--rules--default--filters))

<a id="nestedatt--spec--to--rules--default--backend_refs"></a>
### Nested Schema for `spec.to.rules.default.backend_refs`

Optional:

- `kind` (String) Kind of the referenced resource. must be one of ["Mesh", "MeshSubset", "MeshGateway", "MeshService", "MeshExternalService", "MeshMultiZoneService", "MeshServiceSubset", "MeshHTTPRoute", "Dataplane"]
- `labels` (Map of String) Labels are used to select group of MeshServices that match labels. Either Labels or
Name and Namespace can be used.
- `mesh` (String) Mesh is reserved for future use to identify cross mesh resources.
- `name` (String) Name of the referenced resource. Can only be used with kinds: `MeshService`,
`MeshServiceSubset` and `MeshGatewayRoute`
- `namespace` (String) Namespace specifies the namespace of target resource. If empty only resources in policy namespace
will be targeted.
- `port` (Number) Port is only supported when this ref refers to a real MeshService object
- `proxy_types` (List of String) ProxyTypes specifies the data plane types that are subject to the policy. When not specified,
all data plane types are targeted by the policy.
- `section_name` (String) SectionName is used to target specific section of resource.
For example, you can target port from MeshService.ports[] by its name. Only traffic to this port will be affected.
- `tags` (Map of String) Tags used to select a subset of proxies by tags. Can only be used with kinds
`MeshSubset` and `MeshServiceSubset`
- `weight` (Number) Default: 1


<a id="nestedatt--spec--to--rules--default--filters"></a>
### Nested Schema for `spec.to.rules.default.filters`

Optional:

- `request_header_modifier` (Attributes) Only one action is supported per header name.
Configuration to set or add multiple values for a header must use RFC 7230
header value formatting, separating each value with a comma. (see [below for nested schema](#nestedatt--spec--to--rules--default--filters--request_header_modifier))
- `request_mirror` (Attributes) (see [below for nested schema](#nestedatt--spec--to--rules--default--filters--request_mirror))
- `request_redirect` (Attributes) (see [below for nested schema](#nestedatt--spec--to--rules--default--filters--request_redirect))
- `response_header_modifier` (Attributes) Only one action is supported per header name.
Configuration to set or add multiple values for a header must use RFC 7230
header value formatting, separating each value with a comma. (see [below for nested schema](#nestedatt--spec--to--rules--default--filters--response_header_modifier))
- `type` (String) Not Null; must be one of ["RequestHeaderModifier", "ResponseHeaderModifier", "RequestRedirect", "URLRewrite", "RequestMirror"]
- `url_rewrite` (Attributes) (see [below for nested schema](#nestedatt--spec--to--rules--default--filters--url_rewrite))

<a id="nestedatt--spec--to--rules--default--filters--request_header_modifier"></a>
### Nested Schema for `spec.to.rules.default.filters.request_header_modifier`

Optional:

- `add` (Attributes List) (see [below for nested schema](#nestedatt--spec--to--rules--default--filters--request_header_modifier--add))
- `remove` (List of String)
- `set` (Attributes List) (see [below for nested schema](#nestedatt--spec--to--rules--default--filters--request_header_modifier--set))

<a id="nestedatt--spec--to--rules--default--filters--request_header_modifier--add"></a>
### Nested Schema for `spec.to.rules.default.filters.request_header_modifier.add`

Optional:

- `name` (String) Not Null
- `value` (String) Not Null


<a id="nestedatt--spec--to--rules--default--filters--request_header_modifier--set"></a>
### Nested Schema for `spec.to.rules.default.filters.request_header_modifier.set`

Optional:

- `name` (String) Not Null
- `value` (String) Not Null



<a id="nestedatt--spec--to--rules--default--filters--request_mirror"></a>
### Nested Schema for `spec.to.rules.default.filters.request_mirror`

Optional:

- `backend_ref` (Attributes) BackendRef defines where to forward traffic. Not Null (see [below for nested schema](#nestedatt--spec--to--rules--default--filters--request_mirror--backend_ref))
- `percentage` (Attributes) Percentage of requests to mirror. If not specified, all requests
to the target cluster will be mirrored. (see [below for nested schema](#nestedatt--spec--to--rules--default--filters--request_mirror--percentage))

<a id="nestedatt--spec--to--rules--default--filters--request_mirror--backend_ref"></a>
### Nested Schema for `spec.to.rules.default.filters.request_mirror.backend_ref`

Optional:

- `kind` (String) Kind of the referenced resource. must be one of ["Mesh", "MeshSubset", "MeshGateway", "MeshService", "MeshExternalService", "MeshMultiZoneService", "MeshServiceSubset", "MeshHTTPRoute", "Dataplane"]
- `labels` (Map of String) Labels are used to select group of MeshServices that match labels. Either Labels or
Name and Namespace can be used.
- `mesh` (String) Mesh is reserved for future use to identify cross mesh resources.
- `name` (String) Name of the referenced resource. Can only be used with kinds: `MeshService`,
`MeshServiceSubset` and `MeshGatewayRoute`
- `namespace` (String) Namespace specifies the namespace of target resource. If empty only resources in policy namespace
will be targeted.
- `port` (Number) Port is only supported when this ref refers to a real MeshService object
- `proxy_types` (List of String) ProxyTypes specifies the data plane types that are subject to the policy. When not specified,
all data plane types are targeted by the policy.
- `section_name` (String) SectionName is used to target specific section of resource.
For example, you can target port from MeshService.ports[] by its name. Only traffic to this port will be affected.
- `tags` (Map of String) Tags used to select a subset of proxies by tags. Can only be used with kinds
`MeshSubset` and `MeshServiceSubset`
- `weight` (Number) Default: 1


<a id="nestedatt--spec--to--rules--default--filters--request_mirror--percentage"></a>
### Nested Schema for `spec.to.rules.default.filters.request_mirror.percentage`

Optional:

- `integer` (Number)
- `str` (String)



<a id="nestedatt--spec--to--rules--default--filters--request_redirect"></a>
### Nested Schema for `spec.to.rules.default.filters.request_redirect`

Optional:

- `hostname` (String) PreciseHostname is the fully qualified domain name of a network host. This
matches the RFC 1123 definition of a hostname with 1 notable exception that
numeric IP addresses are not allowed.

Note that as per RFC1035 and RFC1123, a *label* must consist of lower case
alphanumeric characters or '-', and must start and end with an alphanumeric
character. No other punctuation is allowed.
- `path` (Attributes) Path defines parameters used to modify the path of the incoming request.
The modified path is then used to construct the location header.
When empty, the request path is used as-is. (see [below for nested schema](#nestedatt--spec--to--rules--default--filters--request_redirect--path))
- `port` (Number) Port is the port to be used in the value of the `Location`
header in the response.
When empty, port (if specified) of the request is used.
- `scheme` (String) must be one of ["http", "https"]
- `status_code` (Number) StatusCode is the HTTP status code to be used in response. Default: 302; must be one of ["301", "302", "303", "307", "308"]

<a id="nestedatt--spec--to--rules--default--filters--request_redirect--path"></a>
### Nested Schema for `spec.to.rules.default.filters.request_redirect.path`

Optional:

- `replace_full_path` (String)
- `replace_prefix_match` (String)
- `type` (String) Not Null; must be one of ["ReplaceFullPath", "ReplacePrefixMatch"]



<a id="nestedatt--spec--to--rules--default--filters--response_header_modifier"></a>
### Nested Schema for `spec.to.rules.default.filters.response_header_modifier`

Optional:

- `add` (Attributes List) (see [below for nested schema](#nestedatt--spec--to--rules--default--filters--response_header_modifier--add))
- `remove` (List of String)
- `set` (Attributes List) (see [below for nested schema](#nestedatt--spec--to--rules--default--filters--response_header_modifier--set))

<a id="nestedatt--spec--to--rules--default--filters--response_header_modifier--add"></a>
### Nested Schema for `spec.to.rules.default.filters.response_header_modifier.add`

Optional:

- `name` (String) Not Null
- `value` (String) Not Null


<a id="nestedatt--spec--to--rules--default--filters--response_header_modifier--set"></a>
### Nested Schema for `spec.to.rules.default.filters.response_header_modifier.set`

Optional:

- `name` (String) Not Null
- `value` (String) Not Null



<a id="nestedatt--spec--to--rules--default--filters--url_rewrite"></a>
### Nested Schema for `spec.to.rules.default.filters.url_rewrite`

Optional:

- `host_to_backend_hostname` (Boolean) HostToBackendHostname rewrites the hostname to the hostname of the
upstream host. This option is only available when targeting MeshGateways.
- `hostname` (String) Hostname is the value to be used to replace the host header value during forwarding.
- `path` (Attributes) Path defines a path rewrite. (see [below for nested schema](#nestedatt--spec--to--rules--default--filters--url_rewrite--path))

<a id="nestedatt--spec--to--rules--default--filters--url_rewrite--path"></a>
### Nested Schema for `spec.to.rules.default.filters.url_rewrite.path`

Optional:

- `replace_full_path` (String)
- `replace_prefix_match` (String)
- `type` (String) Not Null; must be one of ["ReplaceFullPath", "ReplacePrefixMatch"]





<a id="nestedatt--spec--to--rules--matches"></a>
### Nested Schema for `spec.to.rules.matches`

Optional:

- `headers` (Attributes List) (see [below for nested schema](#nestedatt--spec--to--rules--matches--headers))
- `method` (String) must be one of ["CONNECT", "DELETE", "GET", "HEAD", "OPTIONS", "PATCH", "POST", "PUT", "TRACE"]
- `path` (Attributes) (see [below for nested schema](#nestedatt--spec--to--rules--matches--path))
- `query_params` (Attributes List) QueryParams matches based on HTTP URL query parameters. Multiple matches
are ANDed together such that all listed matches must succeed. (see [below for nested schema](#nestedatt--spec--to--rules--matches--query_params))

<a id="nestedatt--spec--to--rules--matches--headers"></a>
### Nested Schema for `spec.to.rules.matches.headers`

Optional:

- `name` (String) Name is the name of the HTTP Header to be matched. Name MUST be lower case
as they will be handled with case insensitivity (See https://tools.ietf.org/html/rfc7230#section-3.2).
Not Null
- `type` (String) Type specifies how to match against the value of the header. Default: "Exact"; must be one of ["Exact", "Present", "RegularExpression", "Absent", "Prefix"]
- `value` (String) Value is the value of HTTP Header to be matched.


<a id="nestedatt--spec--to--rules--matches--path"></a>
### Nested Schema for `spec.to.rules.matches.path`

Optional:

- `type` (String) Not Null; must be one of ["Exact", "PathPrefix", "RegularExpression"]
- `value` (String) Exact or prefix matches must be an absolute path. A prefix matches only
if separated by a slash or the entire path.
Not Null


<a id="nestedatt--spec--to--rules--matches--query_params"></a>
### Nested Schema for `spec.to.rules.matches.query_params`

Optional:

- `name` (String) Not Null
- `type` (String) Not Null; must be one of ["Exact", "RegularExpression"]
- `value` (String) Not Null




<a id="nestedatt--spec--to--target_ref"></a>
### Nested Schema for `spec.to.target_ref`

Optional:

- `kind` (String) Kind of the referenced resource. must be one of ["Mesh", "MeshSubset", "MeshGateway", "MeshService", "MeshExternalService", "MeshMultiZoneService", "MeshServiceSubset", "MeshHTTPRoute", "Dataplane"]
- `labels` (Map of String) Labels are used to select group of MeshServices that match labels. Either Labels or
Name and Namespace can be used.
- `mesh` (String) Mesh is reserved for future use to identify cross mesh resources.
- `name` (String) Name of the referenced resource. Can only be used with kinds: `MeshService`,
`MeshServiceSubset` and `MeshGatewayRoute`
- `namespace` (String) Namespace specifies the namespace of target resource. If empty only resources in policy namespace
will be targeted.
- `proxy_types` (List of String) ProxyTypes specifies the data plane types that are subject to the policy. When not specified,
all data plane types are targeted by the policy.
- `section_name` (String) SectionName is used to target specific section of resource.
For example, you can target port from MeshService.ports[] by its name. Only traffic to this port will be affected.
- `tags` (Map of String) Tags used to select a subset of proxies by tags. Can only be used with kinds
`MeshSubset` and `MeshServiceSubset`

## Import

Import is supported using the following syntax:

```shell
terraform import konnect_mesh_http_route.my_konnect_mesh_http_route "{ \"cp_id\": \"bf138ba2-c9b1-4229-b268-04d9d8a6410b\",  \"mesh\": \"\",  \"name\": \"\"}"
```
