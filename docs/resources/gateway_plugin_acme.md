---
# generated by https://github.com/hashicorp/terraform-plugin-docs
page_title: "konnect_gateway_plugin_acme Resource - terraform-provider-konnect"
subcategory: ""
description: |-
  GatewayPluginAcme Resource
---

# konnect_gateway_plugin_acme (Resource)

GatewayPluginAcme Resource

## Example Usage

```terraform
resource "konnect_gateway_plugin_acme" "my_gatewaypluginacme" {
  config = {
    account_email = "...my_account_email..."
    account_key = {
      key_id  = "...my_key_id..."
      key_set = "...my_key_set..."
    }
    allow_any_domain = false
    api_uri          = "...my_api_uri..."
    cert_type        = "ecc"
    domains = [
      "..."
    ]
    eab_hmac_key            = "...my_eab_hmac_key..."
    eab_kid                 = "...my_eab_kid..."
    enable_ipv4_common_name = false
    fail_backoff_minutes    = 7.02
    preferred_chain         = "...my_preferred_chain..."
    renew_threshold_days    = 1.5
    rsa_key_size            = 3072
    storage                 = "kong"
    storage_config = {
      consul = {
        host    = "...my_host..."
        https   = false
        kv_path = "...my_kv_path..."
        port    = 27961
        timeout = 6.85
        token   = "...my_token..."
      }
      kong = {
        key = jsonencode("value")
      }
      redis = {
        database = 6
        extra_options = {
          namespace  = "...my_namespace..."
          scan_count = 4.65
        }
        host        = "...my_host..."
        password    = "...my_password..."
        port        = 60103
        server_name = "...my_server_name..."
        ssl         = true
        ssl_verify  = false
        timeout     = 1734626631
        username    = "...my_username..."
      }
      shm = {
        shm_name = "...my_shm_name..."
      }
      vault = {
        auth_method     = "token"
        auth_path       = "...my_auth_path..."
        auth_role       = "...my_auth_role..."
        host            = "...my_host..."
        https           = false
        jwt_path        = "...my_jwt_path..."
        kv_path         = "...my_kv_path..."
        port            = 58658
        timeout         = 3.3
        tls_server_name = "...my_tls_server_name..."
        tls_verify      = true
        token           = "...my_token..."
      }
    }
    tos_accepted = true
  }
  control_plane_id = "9524ec7d-36d9-465d-a8c5-83a3c9390458"
  created_at       = 0
  enabled          = true
  id               = "...my_id..."
  instance_name    = "...my_instance_name..."
  ordering = {
    after = {
      access = [
        "..."
      ]
    }
    before = {
      access = [
        "..."
      ]
    }
  }
  partials = [
    {
      id   = "...my_id..."
      name = "...my_name..."
      path = "...my_path..."
    }
  ]
  protocols = [
    "grpc"
  ]
  tags = [
    "..."
  ]
  updated_at = 9
}
```

<!-- schema generated by tfplugindocs -->
## Schema

### Required

- `config` (Attributes) (see [below for nested schema](#nestedatt--config))
- `control_plane_id` (String) The UUID of your control plane. This variable is available in the Konnect manager. Requires replacement if changed.

### Optional

- `created_at` (Number) Unix epoch when the resource was created.
- `enabled` (Boolean) Whether the plugin is applied.
- `id` (String) A string representing a UUID (universally unique identifier).
- `instance_name` (String) A unique string representing a UTF-8 encoded name.
- `ordering` (Attributes) (see [below for nested schema](#nestedatt--ordering))
- `partials` (Attributes List) A list of partials to be used by the plugin. (see [below for nested schema](#nestedatt--partials))
- `protocols` (Set of String) A set of strings representing HTTP protocols.
- `tags` (List of String) An optional set of strings associated with the Plugin for grouping and filtering.
- `updated_at` (Number) Unix epoch when the resource was last updated.

<a id="nestedatt--config"></a>
### Nested Schema for `config`

Required:

- `account_email` (String) The account identifier. Can be reused in a different plugin instance.

Optional:

- `account_key` (Attributes) The private key associated with the account. (see [below for nested schema](#nestedatt--config--account_key))
- `allow_any_domain` (Boolean) If set to `true`, the plugin allows all domains and ignores any values in the `domains` list.
- `api_uri` (String) A string representing a URL, such as https://example.com/path/to/resource?q=search.
- `cert_type` (String) The certificate type to create. The possible values are `rsa` for RSA certificate or `ecc` for EC certificate. must be one of ["ecc", "rsa"]
- `domains` (List of String) An array of strings representing hosts. A valid host is a string containing one or more labels separated by periods, with at most one wildcard label ('*')
- `eab_hmac_key` (String) External account binding (EAB) base64-encoded URL string of the HMAC key. You usually don't need to set this unless it is explicitly required by the CA.
- `eab_kid` (String) External account binding (EAB) key id. You usually don't need to set this unless it is explicitly required by the CA.
- `enable_ipv4_common_name` (Boolean) A boolean value that controls whether to include the IPv4 address in the common name field of generated certificates.
- `fail_backoff_minutes` (Number) Minutes to wait for each domain that fails to create a certificate. This applies to both a
new certificate and a renewal certificate.
- `preferred_chain` (String) A string value that specifies the preferred certificate chain to use when generating certificates.
- `renew_threshold_days` (Number) Days remaining to renew the certificate before it expires.
- `rsa_key_size` (Number) RSA private key size for the certificate. The possible values are 2048, 3072, or 4096. must be one of ["2048", "3072", "4096"]
- `storage` (String) The backend storage type to use. In DB-less mode and Konnect, `kong` storage is unavailable. In hybrid mode and Konnect, `shm` storage is unavailable. `shm` storage does not persist during Kong restarts and does not work for Kong running on different machines, so consider using one of `kong`, `redis`, `consul`, or `vault` in production. must be one of ["consul", "kong", "redis", "shm", "vault"]
- `storage_config` (Attributes) (see [below for nested schema](#nestedatt--config--storage_config))
- `tos_accepted` (Boolean) If you are using Let's Encrypt, you must set this to `true` to agree the terms of service.

<a id="nestedatt--config--account_key"></a>
### Nested Schema for `config.account_key`

Optional:

- `key_id` (String) The Key ID. Not Null
- `key_set` (String) The ID of the key set to associate the Key ID with.


<a id="nestedatt--config--storage_config"></a>
### Nested Schema for `config.storage_config`

Optional:

- `consul` (Attributes) (see [below for nested schema](#nestedatt--config--storage_config--consul))
- `kong` (Map of String)
- `redis` (Attributes) (see [below for nested schema](#nestedatt--config--storage_config--redis))
- `shm` (Attributes) (see [below for nested schema](#nestedatt--config--storage_config--shm))
- `vault` (Attributes) (see [below for nested schema](#nestedatt--config--storage_config--vault))

<a id="nestedatt--config--storage_config--consul"></a>
### Nested Schema for `config.storage_config.consul`

Optional:

- `host` (String) A string representing a host name, such as example.com.
- `https` (Boolean) Boolean representation of https.
- `kv_path` (String) KV prefix path.
- `port` (Number) An integer representing a port number between 0 and 65535, inclusive.
- `timeout` (Number) Timeout in milliseconds.
- `token` (String) Consul ACL token.


<a id="nestedatt--config--storage_config--redis"></a>
### Nested Schema for `config.storage_config.redis`

Optional:

- `database` (Number) Database to use for the Redis connection when using the `redis` strategy
- `extra_options` (Attributes) Custom ACME Redis options (see [below for nested schema](#nestedatt--config--storage_config--redis--extra_options))
- `host` (String) A string representing a host name, such as example.com.
- `password` (String) Password to use for Redis connections. If undefined, no AUTH commands are sent to Redis.
- `port` (Number) An integer representing a port number between 0 and 65535, inclusive.
- `server_name` (String) A string representing an SNI (server name indication) value for TLS.
- `ssl` (Boolean) If set to true, uses SSL to connect to Redis.
- `ssl_verify` (Boolean) If set to true, verifies the validity of the server SSL certificate. If setting this parameter, also configure `lua_ssl_trusted_certificate` in `kong.conf` to specify the CA (or server) certificate used by your Redis server. You may also need to configure `lua_ssl_verify_depth` accordingly.
- `timeout` (Number) An integer representing a timeout in milliseconds. Must be between 0 and 2^31-2.
- `username` (String) Username to use for Redis connections. If undefined, ACL authentication won't be performed. This requires Redis v6.0.0+. To be compatible with Redis v5.x.y, you can set it to `default`.

<a id="nestedatt--config--storage_config--redis--extra_options"></a>
### Nested Schema for `config.storage_config.redis.extra_options`

Optional:

- `namespace` (String) A namespace to prepend to all keys stored in Redis.
- `scan_count` (Number) The number of keys to return in Redis SCAN calls.



<a id="nestedatt--config--storage_config--shm"></a>
### Nested Schema for `config.storage_config.shm`

Optional:

- `shm_name` (String) Name of shared memory zone used for Kong API gateway storage


<a id="nestedatt--config--storage_config--vault"></a>
### Nested Schema for `config.storage_config.vault`

Optional:

- `auth_method` (String) Auth Method, default to token, can be 'token' or 'kubernetes'. must be one of ["kubernetes", "token"]
- `auth_path` (String) Vault's authentication path to use.
- `auth_role` (String) The role to try and assign.
- `host` (String) A string representing a host name, such as example.com.
- `https` (Boolean) Boolean representation of https.
- `jwt_path` (String) The path to the JWT.
- `kv_path` (String) KV prefix path.
- `port` (Number) An integer representing a port number between 0 and 65535, inclusive.
- `timeout` (Number) Timeout in milliseconds.
- `tls_server_name` (String) SNI used in request, default to host if omitted.
- `tls_verify` (Boolean) Turn on TLS verification.
- `token` (String) Consul ACL token.




<a id="nestedatt--ordering"></a>
### Nested Schema for `ordering`

Optional:

- `after` (Attributes) (see [below for nested schema](#nestedatt--ordering--after))
- `before` (Attributes) (see [below for nested schema](#nestedatt--ordering--before))

<a id="nestedatt--ordering--after"></a>
### Nested Schema for `ordering.after`

Optional:

- `access` (List of String)


<a id="nestedatt--ordering--before"></a>
### Nested Schema for `ordering.before`

Optional:

- `access` (List of String)



<a id="nestedatt--partials"></a>
### Nested Schema for `partials`

Optional:

- `id` (String) A string representing a UUID (universally unique identifier).
- `name` (String) A unique string representing a UTF-8 encoded name.
- `path` (String)

## Import

Import is supported using the following syntax:

```shell
terraform import konnect_gateway_plugin_acme.my_konnect_gateway_plugin_acme '{"control_plane_id": "9524ec7d-36d9-465d-a8c5-83a3c9390458", "id": "3473c251-5b6c-4f45-b1ff-7ede735a366d"}'
```
