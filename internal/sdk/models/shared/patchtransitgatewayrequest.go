// Code generated by Speakeasy (https://speakeasy.com). DO NOT EDIT.

package shared

import (
	"encoding/json"
	"errors"
	"fmt"
	"github.com/kong/terraform-provider-konnect/v3/internal/sdk/internal/utils"
)

// PatchAWSTransitGatewayAWSTransitGateway - Request schema for updating AWS Transit Gateway
type PatchAWSTransitGatewayAWSTransitGateway struct {
	// CIDR blocks for constructing a route table for the transit gateway, when attaching to the owning
	// network.
	//
	CidrBlocks []string `json:"cidr_blocks"`
}

func (p PatchAWSTransitGatewayAWSTransitGateway) MarshalJSON() ([]byte, error) {
	return utils.MarshalJSON(p, "", false)
}

func (p *PatchAWSTransitGatewayAWSTransitGateway) UnmarshalJSON(data []byte) error {
	if err := utils.UnmarshalJSON(data, &p, "", false, []string{"cidr_blocks"}); err != nil {
		return err
	}
	return nil
}

func (p *PatchAWSTransitGatewayAWSTransitGateway) GetCidrBlocks() []string {
	if p == nil {
		return []string{}
	}
	return p.CidrBlocks
}

type PatchAWSResourceEndpointGatewayAWSResourceEndpointAttachmentType string

const (
	PatchAWSResourceEndpointGatewayAWSResourceEndpointAttachmentTypeAwsResourceEndpointAttachment PatchAWSResourceEndpointGatewayAWSResourceEndpointAttachmentType = "aws-resource-endpoint-attachment"
)

func (e PatchAWSResourceEndpointGatewayAWSResourceEndpointAttachmentType) ToPointer() *PatchAWSResourceEndpointGatewayAWSResourceEndpointAttachmentType {
	return &e
}
func (e *PatchAWSResourceEndpointGatewayAWSResourceEndpointAttachmentType) UnmarshalJSON(data []byte) error {
	var v string
	if err := json.Unmarshal(data, &v); err != nil {
		return err
	}
	switch v {
	case "aws-resource-endpoint-attachment":
		*e = PatchAWSResourceEndpointGatewayAWSResourceEndpointAttachmentType(v)
		return nil
	default:
		return fmt.Errorf("invalid value for PatchAWSResourceEndpointGatewayAWSResourceEndpointAttachmentType: %v", v)
	}
}

type TransitGatewayAttachmentConfig struct {
	Kind PatchAWSResourceEndpointGatewayAWSResourceEndpointAttachmentType `json:"kind"`
	// List of unique resource config mapping for aws resource endpoint.
	//
	ResourceConfig []AwsResourceEndpointConfig `json:"resource_config"`
}

func (t TransitGatewayAttachmentConfig) MarshalJSON() ([]byte, error) {
	return utils.MarshalJSON(t, "", false)
}

func (t *TransitGatewayAttachmentConfig) UnmarshalJSON(data []byte) error {
	if err := utils.UnmarshalJSON(data, &t, "", false, []string{"kind", "resource_config"}); err != nil {
		return err
	}
	return nil
}

func (t *TransitGatewayAttachmentConfig) GetKind() PatchAWSResourceEndpointGatewayAWSResourceEndpointAttachmentType {
	if t == nil {
		return PatchAWSResourceEndpointGatewayAWSResourceEndpointAttachmentType("")
	}
	return t.Kind
}

func (t *TransitGatewayAttachmentConfig) GetResourceConfig() []AwsResourceEndpointConfig {
	if t == nil {
		return []AwsResourceEndpointConfig{}
	}
	return t.ResourceConfig
}

// PatchAWSResourceEndpointGatewayAWSResourceEndpointGateway - Request schema for updating AWS Resource Endpoint.
type PatchAWSResourceEndpointGatewayAWSResourceEndpointGateway struct {
	TransitGatewayAttachmentConfig TransitGatewayAttachmentConfig `json:"transit_gateway_attachment_config"`
}

func (p PatchAWSResourceEndpointGatewayAWSResourceEndpointGateway) MarshalJSON() ([]byte, error) {
	return utils.MarshalJSON(p, "", false)
}

func (p *PatchAWSResourceEndpointGatewayAWSResourceEndpointGateway) UnmarshalJSON(data []byte) error {
	if err := utils.UnmarshalJSON(data, &p, "", false, []string{"transit_gateway_attachment_config"}); err != nil {
		return err
	}
	return nil
}

func (p *PatchAWSResourceEndpointGatewayAWSResourceEndpointGateway) GetTransitGatewayAttachmentConfig() TransitGatewayAttachmentConfig {
	if p == nil {
		return TransitGatewayAttachmentConfig{}
	}
	return p.TransitGatewayAttachmentConfig
}

type PatchTransitGatewayRequestType string

const (
	PatchTransitGatewayRequestTypePatchAWSResourceEndpointGatewayAWSResourceEndpointGateway PatchTransitGatewayRequestType = "PatchAwsResourceEndpointGateway_AWSResourceEndpointGateway"
	PatchTransitGatewayRequestTypePatchAWSTransitGatewayAWSTransitGateway                   PatchTransitGatewayRequestType = "PatchAwsTransitGateway_AWSTransitGateway"
)

// PatchTransitGatewayRequest - Request schema for updating a transit gateway.
type PatchTransitGatewayRequest struct {
	PatchAWSResourceEndpointGatewayAWSResourceEndpointGateway *PatchAWSResourceEndpointGatewayAWSResourceEndpointGateway `queryParam:"inline" union:"member"`
	PatchAWSTransitGatewayAWSTransitGateway                   *PatchAWSTransitGatewayAWSTransitGateway                   `queryParam:"inline" union:"member"`

	Type PatchTransitGatewayRequestType
}

func CreatePatchTransitGatewayRequestPatchAWSResourceEndpointGatewayAWSResourceEndpointGateway(patchAWSResourceEndpointGatewayAWSResourceEndpointGateway PatchAWSResourceEndpointGatewayAWSResourceEndpointGateway) PatchTransitGatewayRequest {
	typ := PatchTransitGatewayRequestTypePatchAWSResourceEndpointGatewayAWSResourceEndpointGateway

	return PatchTransitGatewayRequest{
		PatchAWSResourceEndpointGatewayAWSResourceEndpointGateway: &patchAWSResourceEndpointGatewayAWSResourceEndpointGateway,
		Type: typ,
	}
}

func CreatePatchTransitGatewayRequestPatchAWSTransitGatewayAWSTransitGateway(patchAWSTransitGatewayAWSTransitGateway PatchAWSTransitGatewayAWSTransitGateway) PatchTransitGatewayRequest {
	typ := PatchTransitGatewayRequestTypePatchAWSTransitGatewayAWSTransitGateway

	return PatchTransitGatewayRequest{
		PatchAWSTransitGatewayAWSTransitGateway: &patchAWSTransitGatewayAWSTransitGateway,
		Type:                                    typ,
	}
}

func (u *PatchTransitGatewayRequest) UnmarshalJSON(data []byte) error {

	var candidates []utils.UnionCandidate

	// Collect all valid candidates
	var patchAWSResourceEndpointGatewayAWSResourceEndpointGateway PatchAWSResourceEndpointGatewayAWSResourceEndpointGateway = PatchAWSResourceEndpointGatewayAWSResourceEndpointGateway{}
	if err := utils.UnmarshalJSON(data, &patchAWSResourceEndpointGatewayAWSResourceEndpointGateway, "", true, nil); err == nil {
		candidates = append(candidates, utils.UnionCandidate{
			Type:  PatchTransitGatewayRequestTypePatchAWSResourceEndpointGatewayAWSResourceEndpointGateway,
			Value: &patchAWSResourceEndpointGatewayAWSResourceEndpointGateway,
		})
	}

	var patchAWSTransitGatewayAWSTransitGateway PatchAWSTransitGatewayAWSTransitGateway = PatchAWSTransitGatewayAWSTransitGateway{}
	if err := utils.UnmarshalJSON(data, &patchAWSTransitGatewayAWSTransitGateway, "", true, nil); err == nil {
		candidates = append(candidates, utils.UnionCandidate{
			Type:  PatchTransitGatewayRequestTypePatchAWSTransitGatewayAWSTransitGateway,
			Value: &patchAWSTransitGatewayAWSTransitGateway,
		})
	}

	if len(candidates) == 0 {
		return fmt.Errorf("could not unmarshal `%s` into any supported union types for PatchTransitGatewayRequest", string(data))
	}

	// Pick the best candidate using multi-stage filtering
	best := utils.PickBestUnionCandidate(candidates, data)
	if best == nil {
		return fmt.Errorf("could not unmarshal `%s` into any supported union types for PatchTransitGatewayRequest", string(data))
	}

	// Set the union type and value based on the best candidate
	u.Type = best.Type.(PatchTransitGatewayRequestType)
	switch best.Type {
	case PatchTransitGatewayRequestTypePatchAWSResourceEndpointGatewayAWSResourceEndpointGateway:
		u.PatchAWSResourceEndpointGatewayAWSResourceEndpointGateway = best.Value.(*PatchAWSResourceEndpointGatewayAWSResourceEndpointGateway)
		return nil
	case PatchTransitGatewayRequestTypePatchAWSTransitGatewayAWSTransitGateway:
		u.PatchAWSTransitGatewayAWSTransitGateway = best.Value.(*PatchAWSTransitGatewayAWSTransitGateway)
		return nil
	}

	return fmt.Errorf("could not unmarshal `%s` into any supported union types for PatchTransitGatewayRequest", string(data))
}

func (u PatchTransitGatewayRequest) MarshalJSON() ([]byte, error) {
	if u.PatchAWSResourceEndpointGatewayAWSResourceEndpointGateway != nil {
		return utils.MarshalJSON(u.PatchAWSResourceEndpointGatewayAWSResourceEndpointGateway, "", true)
	}

	if u.PatchAWSTransitGatewayAWSTransitGateway != nil {
		return utils.MarshalJSON(u.PatchAWSTransitGatewayAWSTransitGateway, "", true)
	}

	return nil, errors.New("could not marshal union type PatchTransitGatewayRequest: all fields are null")
}
