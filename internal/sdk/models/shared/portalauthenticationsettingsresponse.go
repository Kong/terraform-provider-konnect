// Code generated by Speakeasy (https://speakeasy.com). DO NOT EDIT.

package shared

import (
	"github.com/kong/terraform-provider-konnect/v3/internal/sdk/internal/utils"
)

// PortalOIDCConfig - Configuration properties for an OpenID Connect Identity Provider.
//
// Deprecated: This will be removed in a future release, please migrate away from it as soon as possible.
type PortalOIDCConfig struct {
	Issuer   string   `json:"issuer"`
	ClientID string   `json:"client_id"`
	Scopes   []string `json:"scopes,omitempty"`
	// Mappings from a portal developer atribute to an Identity Provider claim.
	ClaimMappings *PortalClaimMappings `json:"claim_mappings,omitempty"`
}

func (p *PortalOIDCConfig) GetIssuer() string {
	if p == nil {
		return ""
	}
	return p.Issuer
}

func (p *PortalOIDCConfig) GetClientID() string {
	if p == nil {
		return ""
	}
	return p.ClientID
}

func (p *PortalOIDCConfig) GetScopes() []string {
	if p == nil {
		return nil
	}
	return p.Scopes
}

func (p *PortalOIDCConfig) GetClaimMappings() *PortalClaimMappings {
	if p == nil {
		return nil
	}
	return p.ClaimMappings
}

// PortalAuthenticationSettingsResponsePortalClaimMappings - Mappings from a portal developer atribute to an Identity Provider claim.
type PortalAuthenticationSettingsResponsePortalClaimMappings struct {
	Name   *string `default:"name" json:"name"`
	Email  *string `default:"email" json:"email"`
	Groups *string `default:"groups" json:"groups"`
}

func (p PortalAuthenticationSettingsResponsePortalClaimMappings) MarshalJSON() ([]byte, error) {
	return utils.MarshalJSON(p, "", false)
}

func (p *PortalAuthenticationSettingsResponsePortalClaimMappings) UnmarshalJSON(data []byte) error {
	if err := utils.UnmarshalJSON(data, &p, "", false, nil); err != nil {
		return err
	}
	return nil
}

func (p *PortalAuthenticationSettingsResponsePortalClaimMappings) GetName() *string {
	if p == nil {
		return nil
	}
	return p.Name
}

func (p *PortalAuthenticationSettingsResponsePortalClaimMappings) GetEmail() *string {
	if p == nil {
		return nil
	}
	return p.Email
}

func (p *PortalAuthenticationSettingsResponsePortalClaimMappings) GetGroups() *string {
	if p == nil {
		return nil
	}
	return p.Groups
}

// PortalAuthenticationSettingsResponse - The developer authentication settings for a portal.
type PortalAuthenticationSettingsResponse struct {
	// The portal has basic auth enabled or disabled.
	BasicAuthEnabled bool `json:"basic_auth_enabled"`
	// The portal has OIDC enabled or disabled.
	//
	// Deprecated: This will be removed in a future release, please migrate away from it as soon as possible.
	OidcAuthEnabled bool `json:"oidc_auth_enabled"`
	// A Konnect Identity Admin assigns teams to a developer.
	//
	// Deprecated: This will be removed in a future release, please migrate away from it as soon as possible.
	SamlAuthEnabled *bool `json:"saml_auth_enabled,omitempty"`
	// IdP groups determine the Portal Teams a developer has. Replaced by idp_mapping_enabled.
	//
	// Deprecated: This will be removed in a future release, please migrate away from it as soon as possible.
	OidcTeamMappingEnabled bool `json:"oidc_team_mapping_enabled"`
	// Whether IdP groups determine the Konnect Portal teams a developer has.
	IdpMappingEnabled *bool `json:"idp_mapping_enabled,omitempty"`
	// A Konnect Identity Admin assigns teams to a developer.
	KonnectMappingEnabled bool `json:"konnect_mapping_enabled"`
	// Configuration properties for an OpenID Connect Identity Provider.
	//
	// Deprecated: This will be removed in a future release, please migrate away from it as soon as possible.
	OidcConfig   *PortalOIDCConfig `json:"oidc_config,omitempty"`
	OidcIssuer   *string           `default:"null" json:"oidc_issuer"`
	OidcClientID *string           `default:"null" json:"oidc_client_id"`
	OidcScopes   []string          `json:"oidc_scopes"`
	// Mappings from a portal developer atribute to an Identity Provider claim.
	OidcClaimMappings *PortalAuthenticationSettingsResponsePortalClaimMappings `json:"oidc_claim_mappings"`
}

func (p PortalAuthenticationSettingsResponse) MarshalJSON() ([]byte, error) {
	return utils.MarshalJSON(p, "", false)
}

func (p *PortalAuthenticationSettingsResponse) UnmarshalJSON(data []byte) error {
	if out, err := utils.RunJQBytes(data, ". + { oidc_issuer: .oidc_config.issuer, oidc_client_id: .oidc_config.client_id, oidc_claim_mappings: .oidc_config.claim_mappings, oidc_scopes: .oidc_config.scopes } | del(.oidc_config)"); err != nil {
		return err
	} else {
		data = out
	}
	if err := utils.UnmarshalJSON(data, &p, "", false, []string{"basic_auth_enabled", "oidc_auth_enabled", "oidc_team_mapping_enabled", "konnect_mapping_enabled"}); err != nil {
		return err
	}
	return nil
}

func (p *PortalAuthenticationSettingsResponse) GetBasicAuthEnabled() bool {
	if p == nil {
		return false
	}
	return p.BasicAuthEnabled
}

func (p *PortalAuthenticationSettingsResponse) GetOidcAuthEnabled() bool {
	if p == nil {
		return false
	}
	return p.OidcAuthEnabled
}

func (p *PortalAuthenticationSettingsResponse) GetSamlAuthEnabled() *bool {
	if p == nil {
		return nil
	}
	return p.SamlAuthEnabled
}

func (p *PortalAuthenticationSettingsResponse) GetOidcTeamMappingEnabled() bool {
	if p == nil {
		return false
	}
	return p.OidcTeamMappingEnabled
}

func (p *PortalAuthenticationSettingsResponse) GetIdpMappingEnabled() *bool {
	if p == nil {
		return nil
	}
	return p.IdpMappingEnabled
}

func (p *PortalAuthenticationSettingsResponse) GetKonnectMappingEnabled() bool {
	if p == nil {
		return false
	}
	return p.KonnectMappingEnabled
}

func (p *PortalAuthenticationSettingsResponse) GetOidcConfig() *PortalOIDCConfig {
	if p == nil {
		return nil
	}
	return p.OidcConfig
}

func (p *PortalAuthenticationSettingsResponse) GetOidcIssuer() *string {
	if p == nil {
		return nil
	}
	return p.OidcIssuer
}

func (p *PortalAuthenticationSettingsResponse) GetOidcClientID() *string {
	if p == nil {
		return nil
	}
	return p.OidcClientID
}

func (p *PortalAuthenticationSettingsResponse) GetOidcScopes() []string {
	if p == nil {
		return nil
	}
	return p.OidcScopes
}

func (p *PortalAuthenticationSettingsResponse) GetOidcClaimMappings() *PortalAuthenticationSettingsResponsePortalClaimMappings {
	if p == nil {
		return nil
	}
	return p.OidcClaimMappings
}
